<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Monitor Data Validation • dccmonitor</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Monitor Data Validation">
<meta property="og:description" content="Allows for monitoring of data uploaded via the
    dccvalidator application. Functions for getting information
    on the uploaded files, metadata validation status, and more.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">dccmonitor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9007</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Sage-Bionetworks/dccmonitor/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="dccmonitor" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#dccmonitor" class="anchor"></a>dccmonitor</h1></div>
<p>This package is intended to assist Sage Bionetworks data curators to check the status of metadata and documentation files uploaded via the <a href="https://sage-bionetworks.github.io/dccvalidator/">dccvalidator</a> shiny application. The dccmonitor package contains functions to gather validation information. Optionally, the included Shiny application can be used to view the results.</p>
<div id="requirements" class="section level2">
<h2 class="hasAnchor">
<a href="#requirements" class="anchor"></a>Requirements</h2>
<p>dccmonitor uses the reticulate package with the <a href="https://github.com/Sage-Bionetworks/synapsePythonClient">Synapse Python Client</a>. See the <a href="https://rstudio.github.io/reticulate/#python-version">reticulate documentation</a> for more information on setting up reticulate to work with your local Python environment. Additionally, see the <a href="https://github.com/Sage-Bionetworks/synapsePythonClient">Synapse Python Client</a> for installation instructions. The Synapse Python Client should be installed in the same Python environment used by reticulate.</p>
<p>Using the dccmonitor Shiny application requires that the user have a Synapse account, and have permission to access necessary Synapse files. These files include the specific Synapse folder of interest for monitoring (see <a href="https://github.com/Sage-Bionetworks/dccmonitor/tree/update-readme#customization">Customization</a> for details), along with access to all dccvalidator Synapse dependencies (ex: template and annotation files).</p>
</div>
<div id="installation-and-use" class="section level2">
<h2 class="hasAnchor">
<a href="#installation-and-use" class="anchor"></a>Installation and Use</h2>
<p>dccmonitor can be installed and used in two ways: package installation, and cloning the repository.</p>
<div id="package-installation" class="section level3">
<h3 class="hasAnchor">
<a href="#package-installation" class="anchor"></a>Package Installation</h3>
<p>dccmonitor can be installed via devtools:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"Sage-Bionetworks/dccmonitor"</span><span class="op">)</span></code></pre></div>
<p>To run the Shiny application, there needs to be a config.yml file in the working directory with the required options (see <a href="https://github.com/Sage-Bionetworks/dccmonitor/tree/update-readme#customization">Customization</a>). After creating the config.yml file, the application can be run with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Sage-Bionetworks/dccmonitor">dccmonitor</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html">Sys.setenv</a></span><span class="op">(</span>R_CONFIG_ACTIVE <span class="op">=</span> <span class="st">"default"</span><span class="op">)</span> <span class="co"># Replace "default" with the configuration name if not using default.</span>
<span class="fu"><a href="reference/run_app.html">run_app</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
<div id="cloning-repository" class="section level3">
<h3 class="hasAnchor">
<a href="#cloning-repository" class="anchor"></a>Cloning Repository</h3>
<p><a href="https://help.github.com/en/github/creating-cloning-and-archiving-repositories/cloning-a-repository">Clone the repository</a> to a local directory. Customize the config.yml file, as needed (see <a href="https://github.com/Sage-Bionetworks/dccmonitor/tree/update-readme#customization">Customization</a>).</p>
<p>If your working directory is the application directory, you can change the app.R file to have your configuration name, if not using the default configuration. Then the following will start the app:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">renv</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/renv//reference/restore.html">restore</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># Update project package library</span>
<span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/runApp.html">runApp</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="customization" class="section level2">
<h2 class="hasAnchor">
<a href="#customization" class="anchor"></a>Customization</h2>
<p>Customizing the application is done via the config.yml file and the specific file validation checks.</p>
<div id="config-yml" class="section level3">
<h3 class="hasAnchor">
<a href="#config-yml" class="anchor"></a>config.yml</h3>
<p>A configuration file is required for the application to behave correctly. Create a configuration for the application called config.yml (see <a href="https://github.com/Sage-Bionetworks/dccmonitor/blob/master/config.yml">this repo’s config.yml</a> for an example) in your working directory if you have installed the package, or alter the config.yml file if you have cloned the repository. If you are not using default as your configuration, set the active configuration as described in the instructions for your choice of installation, <a href="https://github.com/Sage-Bionetworks/dccmonitor/tree/update-readme#package-installation">package</a> or <a href="https://github.com/Sage-Bionetworks/dccmonitor/tree/update-readme#cloning-repository">cloned repository</a>. Alternatively, if you have forked the repository and added a new set of configuration options to the config.yml file, you can open a Pull Request to see about adding the new options.</p>
<p><strong>Note:</strong> a default configuration is required in the config.yml file. Additionally, if using a non-default (named) configuration, any settings in default that are not overwritten by the named configuration will be inherited.</p>
<p>Of the configuration options, only two are specific to dccmonitor while the rest are used to customize the dccvalidator checks. The dccmonitor specific configurations are:</p>
<ul>
<li>
<code>production</code>: <code>TRUE</code> to use production Synapse endpoints; <code>FALSE</code> to use staging endpoints. Used for testing new versions of the client before they are officially released. See <a href="https://python-docs.synapse.org/build/html/index.html?highlight=endpoints#synapseclient.Synapse.setEndpoints">Synapse client documentation</a> for information on endpoints.</li>
<li>
<code>teams</code>: Synapse administration team ID. The app data should only be accessible to curators with admin privileges.</li>
<li>
<code>annotations_storage</code>: Synapse folder ID for storing annotation csv files created in the. The folder should only be accessible to curators with admin privileges.</li>
<li>
<code>consortium_fileview</code>: Synapse file view ID. A Synapse file view that shows all the files in the <code>parent</code> folder (this is the folder that dccvalidator uploads metadata and documentation files to), along with their annotations. The file view should include the columns: id, name, createdOn, createdBy, modifiedOn, currentVersion, study, metadataType, species, assay. Note that the following file-specific annotations are required for dccmonitor to function properly:
<ul>
<li>documentation: study</li>
<li>manifest: study, metadataType = manifest</li>
<li>individual metadata: study, species, metadataType = individual</li>
<li>biospecimen metadata: study, species, metadataType = biospecimen</li>
<li>assay metadata: study, species, assay, metadataType = assay</li>
</ul>
</li>
<li>
<code>annotation_keys</code>: List of annotation keys that should <strong>not</strong> be included in annotations. These keys would be any that could be considered PHI/PII.</li>
</ul>
<p>A brief overview of the dccvalidator specific configurations are below, but more information can be found in the <a href="https://sage-bionetworks.github.io/dccvalidator/articles/customizing-dccvalidator.html#configuration-options">dccvalidator documentation</a>:</p>
<ul>
<li>
<code>annotations_table</code>: Synapse ID for the annotations master table.</li>
<li>
<code>annotations_link</code>: Address for the annotations website.</li>
<li>
<code>templates</code>: List of master templates for each type of metadata or manifest file.</li>
<li>
<code>species_list</code>: List of species.</li>
<li>
<code>complete_columns</code>: List of columns that are required to be complete for each type of metadata or manifest file.</li>
</ul>
</div>
<div id="validation-checks" class="section level3">
<h3 class="hasAnchor">
<a href="#validation-checks" class="anchor"></a>Validation Checks</h3>
<p>dccmonitor uses the <a href="https://github.com/Sage-Bionetworks/dccvalidator/blob/master/R/check-all.R">dccvalidator’s <code>check_all()</code></a> to validate the metadata and manifest files. Currently, there is not a simple way to change the validation checks that are done.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/Sage-Bionetworks/dccmonitor/">https://​github.com/​Sage-Bionetworks/​dccmonitor/​</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Nicole Kauer <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Nicole Kauer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
